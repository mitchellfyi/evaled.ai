<div class="page-header">
  <h1>API Keys</h1>
</div>

<style>
  .data-table {
    width: 100%;
    background: white;
    border-radius: 0.75rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    overflow: hidden;
  }
  
  .data-table th,
  .data-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .data-table th {
    background: #f9fafb;
    font-weight: 600;
    font-size: 0.875rem;
    color: #374151;
  }
  
  .data-table tr:last-child td {
    border-bottom: none;
  }
  
  .key-preview {
    font-family: monospace;
    background: #f3f4f6;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.875rem;
  }
  
  .btn {
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
  }
  
  .btn-sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
  }
  
  .btn-danger {
    background: #dc2626;
    color: white;
    border: none;
  }
</style>

<table class="data-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>User</th>
      <th>Key (preview)</th>
      <th>Created</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @api_keys.each do |api_key| %>
      <tr>
        <td><%= api_key.id %></td>
        <td><%= api_key.user&.email || "N/A" %></td>
        <td>
          <span class="key-preview"><%= api_key.key.to_s[0..7] %>...</span>
        </td>
        <td><%= api_key.created_at.strftime("%Y-%m-%d") %></td>
        <td>
          <%= button_to "Revoke", admin_api_key_path(api_key), method: :delete, class: "btn btn-sm btn-danger", data: { confirm: "Are you sure you want to revoke this API key?" } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
