<div class="page-header" style="display: flex; justify-content: space-between; align-items: center;">
  <h1><%= @pending_agent.name %></h1>
  <span class="badge badge-<%= @pending_agent.status %>"><%= @pending_agent.status.capitalize %></span>
</div>

<style>
  .detail-card {
    background: white;
    border-radius: 0.75rem;
    padding: 1.5rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    margin-bottom: 1.5rem;
  }

  .detail-card h2 {
    font-size: 1.125rem;
    margin-bottom: 1rem;
    color: #111827;
  }

  .detail-row {
    display: flex;
    padding: 0.5rem 0;
    border-bottom: 1px solid #f3f4f6;
  }

  .detail-row:last-child {
    border-bottom: none;
  }

  .detail-label {
    width: 150px;
    font-weight: 600;
    color: #374151;
    font-size: 0.875rem;
  }

  .detail-value {
    flex: 1;
    color: #111827;
    font-size: 0.875rem;
  }

  .topic-tag {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    background: #eef2ff;
    color: #4338ca;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    margin: 0.125rem;
  }

  .badge {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .badge-pending { background: #fef3c7; color: #92400e; }
  .badge-approved { background: #d1fae5; color: #065f46; }
  .badge-rejected { background: #fee2e2; color: #991b1b; }

  .btn {
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    border: none;
  }

  .btn-success { background: #059669; color: white; }
  .btn-danger { background: #dc2626; color: white; }
  .btn-secondary { background: #6b7280; color: white; }

  .action-bar {
    display: flex;
    gap: 0.75rem;
    align-items: center;
  }
</style>

<div class="detail-card">
  <h2>Repository Details</h2>
  <div class="detail-row">
    <div class="detail-label">GitHub URL</div>
    <div class="detail-value">
      <%= link_to @pending_agent.github_url, @pending_agent.github_url, target: "_blank", rel: "noopener" %>
    </div>
  </div>
  <div class="detail-row">
    <div class="detail-label">Owner</div>
    <div class="detail-value"><%= @pending_agent.owner %></div>
  </div>
  <div class="detail-row">
    <div class="detail-label">Description</div>
    <div class="detail-value"><%= @pending_agent.description || "No description" %></div>
  </div>
  <div class="detail-row">
    <div class="detail-label">Stars</div>
    <div class="detail-value"><%= number_with_delimiter(@pending_agent.stars || 0) %></div>
  </div>
  <div class="detail-row">
    <div class="detail-label">Language</div>
    <div class="detail-value"><%= @pending_agent.language || "Unknown" %></div>
  </div>
  <div class="detail-row">
    <div class="detail-label">License</div>
    <div class="detail-value"><%= @pending_agent.license || "None" %></div>
  </div>
  <div class="detail-row">
    <div class="detail-label">Topics</div>
    <div class="detail-value">
      <% (@pending_agent.topics || []).each do |topic| %>
        <span class="topic-tag"><%= topic %></span>
      <% end %>
    </div>
  </div>
</div>

<div class="detail-card">
  <h2>Discovery Details</h2>
  <div class="detail-row">
    <div class="detail-label">Confidence Score</div>
    <div class="detail-value"><strong><%= @pending_agent.confidence_score %></strong> / 100</div>
  </div>
  <div class="detail-row">
    <div class="detail-label">Discovered</div>
    <div class="detail-value"><%= @pending_agent.discovered_at&.strftime("%Y-%m-%d %H:%M UTC") %></div>
  </div>
  <% if @pending_agent.reviewed_at %>
    <div class="detail-row">
      <div class="detail-label">Reviewed</div>
      <div class="detail-value"><%= @pending_agent.reviewed_at.strftime("%Y-%m-%d %H:%M UTC") %></div>
    </div>
    <div class="detail-row">
      <div class="detail-label">Reviewed By</div>
      <div class="detail-value"><%= @pending_agent.reviewed_by&.email %></div>
    </div>
  <% end %>
  <% if @pending_agent.rejection_reason.present? %>
    <div class="detail-row">
      <div class="detail-label">Rejection Reason</div>
      <div class="detail-value"><%= @pending_agent.rejection_reason %></div>
    </div>
  <% end %>
</div>

<div class="action-bar">
  <% if @pending_agent.pending? %>
    <%= button_to "✅ Approve", approve_admin_pending_agent_path(@pending_agent), method: :post, class: "btn btn-success" %>
    <%= button_to "❌ Reject", reject_admin_pending_agent_path(@pending_agent), method: :post, class: "btn btn-danger" %>
  <% end %>
  <%= link_to "← Back to List", admin_pending_agents_path, class: "btn btn-secondary" %>
</div>
